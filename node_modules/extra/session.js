const express=require("express")
const session=require("express-session")
const uuid=require("uuid")
const app=express()
const bodyParser = require("body-parser"); // Import the bodyParser middleware

app.use(bodyParser.urlencoded({ extended: true }));

app.use(session({
    genid:(req)=>{
        return uuid.v4()
    },
    secret:"hello",
    resave:false,
    saveUninitialized:true
}))
app.get("/",(req,res)=>{
    res.sendFile(__dirname+"/form.html")
})
app.post('/login',(req,res)=>{
    req.session.userId=req.body.i1
    res.redirect("/welcome")
    // res.send(`hello ${req.session.userId} `)
})
app.get("/welcome",(req,res)=>{
    res.send(`login ${req.session.userId}`)
})
const PORT = 3000;
app.listen(PORT, () => {
  console.log(`Server running on http://localhost:${PORT}`)
})